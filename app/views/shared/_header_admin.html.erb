<div class="bg-gray-100" data-controller="sidebar">
    <!-- BotÃ³n para abrir/cerrar el sidebar -->
    <button data-sidebar-target="toggle" 
            data-action="click->sidebar#toggle"
            type="button" 
            class="fixed z-50 inline-flex items-center p-2 mt-3 ml-5 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
        <span class="sr-only"><%= t('admin.sidebar.open') %></span>
        <svg class="w-6 h-6" aria-hidden="true" fill="gray" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
        </svg>
    </button>

    <!-- Sidebar -->
    <nav data-sidebar-target="sidebar"
         class="fixed top-0 left-0 z-40 w-64 h-screen md:h-[calc(100vh-1px)] transition-transform -translate-x-full lg:translate-x-0"
         aria-label="Sidebar">
        <div class="flex flex-col h-full px-3 py-4 bg-[var(--color-blue-gem-950)] rounded-r-lg md:rounded-none">
            <!-- Main Navigation Menu -->
            <div class="flex-1">
                <ul class="mt-8 space-y-1 font-medium text-white">
                    <% wms_menu_items(current_user, current_admin).each do |item| %>
                        <li>
                            <%= link_to item[:path], 
                                data: { 
                                  sidebar_target: "link",
                                  action: "click->sidebar#linkClicked"
                                },
                                class: "flex items-center p-2 rounded-lg hover:bg-[var(--color-blue-gem-600)] #{'bg-[var(--color-blue-gem-600)]' if current_page?(item[:path])}" do %>
                                <%= icon('fa-solid', item[:icon], class: 'w-4 h-4 mr-2.5') %> 
                                <span class="text-sm"><%= item[:label] %></span>
                            <% end %>
                        </li>
                    <% end %>
                </ul>
            </div>
            
            <!-- Bottom Section: Notifications and User Profile -->
            <div class="mt-auto mb-2 space-y-1 text-white flex-shrink-0 min-h-0">
                <div class="border-t border-gray-600 my-2"></div>

                <!-- Notifications -->
                <%= render 'shared/notifications_dropdown' %>

                <!-- User Profile -->
                <%= render 'shared/user_profile_dropdown' %>
                </div>
            </div>
        </div>
    </nav>
</div>